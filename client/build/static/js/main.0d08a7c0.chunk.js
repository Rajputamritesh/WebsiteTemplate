(this.webpackJsonpbasicmern=this.webpackJsonpbasicmern||[]).push([[0],{114:function(e,t,a){},242:function(e,t,a){e.exports=a(473)},247:function(e,t,a){},251:function(e,t,a){},310:function(e,t){},315:function(e,t,a){},473:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),s=a.n(r),c=(a(247),a(248),a(249),a(14)),l=a(11),i=a(16),u=a(17),m=a(18),p=(a(250),a(251),a(520)),h=a(518),d=a(501),g=a(502),f=a(503),E=a(504),b=a(23),O="POST_MESSAGE",v=a(30),y=a.n(v),k=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERRORS",payload:{msg:e,status:t,id:a}}},S=function(){return{type:"CLEAR_ERRORS"}},A=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a},j=function(e){return function(t,a){t(C());var n=A(a);n.params={date:e},y.a.get("/api/items",n).then((function(e){return t({type:"GET_ITEMS",payload:e.data})})).catch((function(e){console.log(e)}))}},C=function(){return console.log("loading"),{type:"LOADING_ITEMS"}},w=a(55),N=a(47),M=a(24),R={items:[]},D={msg:{},status:null,id:null},L={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},T={chats:""},I={searchSuggestions:""},U={statusCode:"",respMessage:"",markersInfo:""},x=Object(w.c)({item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITEMS":return Object(M.a)({},e,{items:t.payload,loading:!1});case"ADD_ITEM":var a=t.payload;return Object(M.a)({},e,{items:[a].concat(Object(N.a)(e.items))});case"DELETE_ITEMS":return console.log(t.payload.id),Object(M.a)({},e,{items:e.items.filter((function(e){return e._id!==t.payload.id}))});case"LOADING_ITEMS":return Object(M.a)({},e,{loading:!0});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return{msg:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(M.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(M.a)({},e,{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(M.a)({},e,{},t.payload,{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(M.a)({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},chatein:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHAT_LOADED":return Object(M.a)({},e,{chats:t.payload});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_LOADING":return Object(M.a)({},e,{searchSuggestions:t.payload});default:return e}},markers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return console.log(t.payload.status),Object(M.a)({},e,{statusCode:t.payload.status,respMessage:t.payload.message});case"GET_MARKERS":return console.log(t.payload),Object(M.a)({},e,{markersInfo:t.payload});default:return e}}}),z=a(39),G=a(497),H=a(221),B=a(28),F=a(515);var _=function(e){return function(t,a){console.log(e);var n=A(a);return n.params={date:e},console.log(n),y.a.get("/api/map",n).then((function(e){return t({type:"GET_MARKERS",payload:e.data})}))}};var P=Object(b.b)((function(e){return{items:e.item}}),{fetchList:j,getMarkers:_})((function(e){var t=o.a.useState(new Date),a=Object(z.a)(t,2),n=a[0],r=a[1];return o.a.createElement(B.a,{utils:H.a},o.a.createElement(G.a,{container:!0,justify:"space-around"},o.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog",label:"Date picker dialog",format:"MM/dd/yyyy",value:n,onChange:function(t){t=new Date(t),console.log(t),r(t),"Mark"==e.flag&&e.fetchList(t),"Map"==e.flag&&(localStorage.setItem("Date",t),e.getMarkers(t))},KeyboardButtonProps:{"aria-label":"change date"}})))})),W=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("hiii")}},{key:"render",value:function(){var e=this,t=this.props.items.items;return console.log(this.props.items),o.a.createElement(d.a,null,o.a.createElement(g.a,{color:"dark",style:{marginBottom:"2rem"},onClick:function(){if(e.props.auth.isAuthenticated){var t=prompt("Enter Item");t&&e.props.addItem(t)}else alert("Kindly sign in ")}},"Add Item"),o.a.createElement(P,{flag:"Mark"}),o.a.createElement(f.a,null,o.a.createElement(p.a,{className:"shopping-list"},t.map((function(t){var a=t._id,n=t.name;return o.a.createElement(h.a,{key:a,timeout:500},o.a.createElement(E.a,null,o.a.createElement(g.a,{className:"remove-btn",color:"danger",size:"sm",onClick:function(){e.props.deleteItem(a)}},"\xd7"),n))})))))}}]),t}(n.Component),q=Object(b.b)((function(e){return{items:e.item,auth:e.auth}}),{fetchList:j,addItem:function(e){return function(t,a){console.log(e),y.a.post("/api/items",{name:e},A(a)).then((function(e){return t({payload:e.data,type:"ADD_ITEM"})})).catch((function(e){console.log(e)}))}},deleteItem:function(e){return function(t,a){console.log(e),y.a.delete("/api/items/".concat(e),A(a)).then(t({payload:{id:e},type:"DELETE_ITEMS"}))}}})(W),K=a(281),X=a(508),Y=a(509),Q=a(510),V=a(511),Z=a(13),J=a(505),$=a(521),ee=a(506),te=a(507),ae=a(208),ne=a(148),oe=a(149),re=a(150),se=a(103),ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={modal:!1,name:"",email:"",password:"",message:null,flag:!1},a.toggle=function(){a.props.clearErrors(),console.log(a.state.modal),a.setState({modal:!a.state.modal},(function(){console.log(this.state.modal)}))},a.onChange=function(e){a.setState(Object(Z.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),console.log("hiiiii");var t=a.state,n={name:t.name,email:t.email,password:t.password};a.props.register(n),a.toggle()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.error;n!==e.error?this.setState({message:n.msg.msg}):this.state.message=null}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(J.a,{onClick:this.toggle,href:"#"},"Register"),o.a.createElement($.a,{isOpen:this.state.modal},o.a.createElement(ee.a,{toggle:this.toggle},"Register"),o.a.createElement(te.a,null,this.state.message?o.a.createElement(se.a,{color:"danger"},this.state.message):null,o.a.createElement(ae.a,{onSubmit:this.onSubmit},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{for:"name"},"Name"),o.a.createElement(re.a,{type:"text",name:"name",id:"name",placeholder:"Name....",className:"mb-3",onChange:this.onChange}),o.a.createElement(oe.a,{for:"email"},"Email"),o.a.createElement(re.a,{type:"email",name:"email",id:"email",className:"mb-3",placeholder:"Email....",onChange:this.onChange}),o.a.createElement(oe.a,{for:"password"},"Password"),o.a.createElement(re.a,{type:"password",name:"password",id:"password",className:"mb-3",placeholder:"password....",onChange:this.onChange}),o.a.createElement(g.a,{color:"dark",type:"submit",style:{marginTop:"2rem"},block:!0},"Register"))))))}}]),t}(n.Component),le=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{register:function(e){var t=e.name,a=e.email,n=e.password;return function(e,o){console.log(n);var r=JSON.stringify({name:t,email:a,password:n});y.a.post("/api/users",r,{headers:{"Content-type":"application/json"}}).then((function(t){return e({type:"REGISTER_SUCCESS",payload:t.data})})).catch((function(t){e(k(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:"AUTH_ERROR"})}))}},clearErrors:S})(ce),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).loggingOut=function(){a.props.logout()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(J.a,{onClick:this.loggingOut,href:"/"},"Logout")}}]),t}(n.Component),ue=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{logout:function(){return function(e){console.log("kskksk"),e({type:"LOGOUT_SUCCESS"})}}})(ie),me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={modal:!1,name:"",email:"",password:"",message:null,flag:!1},a.toggle=function(){a.props.clearErrors(),console.log(a.state.modal),a.setState({modal:!a.state.modal},(function(){console.log(this.state.modal)}))},a.onChange=function(e){a.setState(Object(Z.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),console.log("login");var t=a.state,n={email:t.email,password:t.password};a.props.login(n),a.toggle()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.error;n!==e.error?this.setState({message:n.msg.msg}):this.state.message=null}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(J.a,{onClick:this.toggle,href:"#"},"Login"),o.a.createElement($.a,{isOpen:this.state.modal},o.a.createElement(ee.a,{toggle:this.toggle},"LOGIN"),o.a.createElement(te.a,null,this.state.message?o.a.createElement(se.a,{color:"danger"},this.state.message):null,o.a.createElement(ae.a,{onSubmit:this.onSubmit},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{for:"email"},"Email"),o.a.createElement(re.a,{type:"email",name:"email",id:"email",className:"mb-3",placeholder:"Email....",onChange:this.onChange}),o.a.createElement(oe.a,{for:"password"},"Password"),o.a.createElement(re.a,{type:"password",name:"password",id:"password",className:"mb-3",placeholder:"password....",onChange:this.onChange}),o.a.createElement(g.a,{color:"dark",type:"submit",style:{marginTop:"2rem"},block:!0},"Login"))))))}}]),t}(n.Component),pe=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error,item:e.item}}),{login:function(e){var t=e.email,a=e.password;return function(e,n){console.log(t);var o=JSON.stringify({email:t,password:a});y.a.post("/api/auth",o,A(n)).then((function(t){return e({type:"LOGIN_SUCCESS",payload:t.data})})).catch((function(t){e(k(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})}))}},clearErrors:S})(me),he=(a(114),a(110)),de=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isOpen:!1,flag:!1},a.toggle=function(){a.setState({isOpen:!a.state.isOpen})},a.AccessControl=function(){return function(e){e().auth.isAuthenticated?a.setState({flag:!0}):a.state.flag=!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.AccessControl()}},{key:"render",value:function(){return o.a.createElement(K.a,{color:"dark",dark:!0,expand:"sm",className:"mb-5"},o.a.createElement(d.a,null,o.a.createElement(he.LinkContainer,{className:"colo m-2",to:"/"},o.a.createElement(X.a,{className:"nav"},"MarkLife Application")),o.a.createElement(Y.a,{onClick:this.toggle}),o.a.createElement(Q.a,{isOpen:this.state.isOpen,navbar:!0},o.a.createElement(V.a,{className:"ml-auto",navbar:!0},this.props.auth.isAuthenticated?"":o.a.createElement(X.a,null,o.a.createElement(le,null)),this.props.auth.isAuthenticated?o.a.createElement(he.LinkContainer,{className:"colo m-2",to:"/chat"},o.a.createElement(X.a,{className:"nav"},"Chat")):"",this.props.auth.isAuthenticated?o.a.createElement(he.LinkContainer,{className:"colo m-2",to:"/map"},o.a.createElement(X.a,{className:"colo",style:{color:"white"}},"Map")):"",this.props.auth.isAuthenticated?o.a.createElement(X.a,null,o.a.createElement(ue,null)):"",this.props.auth.isAuthenticated?"":o.a.createElement(X.a,null,o.a.createElement(pe,null))))))}}]),t}(n.Component),ge=Object(b.b)((function(e){return{auth:e.auth}}),{})(de),fe=[a(209).a],Ee=Object(w.e)(x,{},Object(w.d)(w.a.apply(void 0,fe),window.devToolsExtension?window.devToolsExtension():function(e){return e})),be=a(35),Oe=a(97),ve=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(q,null))}}]),t}(n.Component),ye=a(512),ke=a(210),Se=a.n(ke),Ae=a(516),je=(n.Component,a(313),a(315),a(211)),Ce=a.n(je),we=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={chatMessage:"",newArray:[]},a.handleSearchChange=function(e){a.setState({chatMessage:e.target.value})},a.submitChatMessage=function(e){e.preventDefault(),console.log(a.props.auth.user);var t=Date(Date.now()).toString();console.log(t);var n={userDetails:a.props.auth.user,nowTime:t,type:"Text",chatMessage:a.state.chatMessage};a.socket.emit("Input Chat Message",n),a.setState({chatMessage:""})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=Se()("localhost:8080"),this.socket.on("Output Chat Message",(function(t){console.log(t[0]._id),e.props.getChats()})),this.props.getChats()}},{key:"render",value:function(){var e=this;console.log(this.props.chats.chats);[].concat(this.props.chats.chats);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:""},o.a.createElement("div",{className:"infoBar"},"   ",o.a.createElement("label",null,"Real time chatting.."),"   "),o.a.createElement("div",{className:"outerContainerChat"},o.a.createElement("div",{className:"containerChat"},o.a.createElement(Ce.a,{className:"messages"},this.props.chats.chats?this.props.chats.chats.map((function(t){return o.a.createElement("div",{style:{width:"100%"}},null!=t.sender._id&&e.props.auth.user._id==t.sender._id?o.a.createElement("div",{className:"messageContainer justifyEnd"},o.a.createElement("div",{className:"messageBox backgroundBlue"},o.a.createElement("p",{className:"messageText colorWhite"},t.message)),o.a.createElement("p",{className:"sentText pr-10"},"you")):o.a.createElement("div",{className:"messageContainer justifyStart"},o.a.createElement("div",{className:"messageBox backgroundLight"},o.a.createElement("p",{className:"messageText colorDark"},t.message)),o.a.createElement("p",{className:"sentText pr-10"},t.sender.name)))})):""),o.a.createElement(Ae.a,{className:"form",onSubmit:this.submitChatMessage},o.a.createElement(ye.a,{className:"wrapper"},o.a.createElement(re.a,{className:"input",value:this.state.chatMessage,onChange:this.handleSearchChange,placeholder:"Chat...",type:"text",name:"search"}),o.a.createElement(g.a,{onClick:this.submitChatMessage,className:"sendButton"},"Enter")))))))}}]),t}(n.Component),Ne=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,auth:e.auth,chats:e.chatein}}),{getChats:function(){return function(e){y.a.get("/api/chats").then((function(t){return e({type:"CHAT_LOADED",payload:t.data})}))}}})(we),Me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={searchText:"",newArray:[]},a.handleSearchChange=function(e){a.setState({searchText:e.target.value});var t=e.target.value;console.log(t),a.props.getSearchSuggestions(t)},a.submitSearch=function(e){},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",null,"SearchBox.."),o.a.createElement(Ae.a,{onSubmit:this.submitSearch},o.a.createElement(ye.a,{className:"wrapper"},o.a.createElement(re.a,{value:this.state.search,onChange:this.handleSearchChange,placeholder:"search...",type:"text",name:"search"}),o.a.createElement(g.a,{onClick:this.submitSearch,className:"x",color:"secondary"},"search"))))}}]),t}(n.Component),Re=Object(b.b)((function(e){return{search:e.search}}),{getSearchSuggestions:function(e){return function(t){console.log(e);var a={key:e};y.a.post("/api/searchSuggestions",a).then((function(e){return console.log(e.data)})).catch((function(e){console.log(e.response)}))}}})(Me),De=a(15),Le=a(26),Te=a.n(Le),Ie=a(519),Ue=a(522),xe=a(513),ze=a(523),Ge=a(514),He=a(219),Be=a(220),Fe=Te.a.icon({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII",iconSize:[25,41],iconAnchor:[12.5,41],popupAnchor:[0,-41]}),_e=Te.a.icon({iconUrl:"https://leafletjs.com/examples/custom-icons/leaf-red.png",iconSize:[25,41],iconAnchor:[12.5,41],popupAnchor:[0,-41]}),Pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={coords:{lat:51.505,lng:-.09},haveUserLocation:!1,zoom:1,userMessage:{name:"",message:""},position:[]},a.Submitted=function(e){e.preventDefault(),console.log(a.state),a.props.markMessage(a.state).then((function(){alert(a.props.markers.respMessage),a.props.getMarkers().then((function(){console.log(a.props.markers.markersInfo),a.setState((function(e){return Object(M.a)({},e.position,{position:a.props.markers.markersInfo})}))}))}))},a.changedFormValue=function(e){var t=e.target,n=t.name,o=t.value;a.setState((function(e){return{userMessage:Object(M.a)({},e.userMessage,Object(Z.a)({},n,o))}}))},a.renderMarkers=function(e){return o.a.createElement(Ie.a,{className:"map",center:[a.state.coords.lat,a.state.coords.lng],zoom:a.state.zoom},o.a.createElement(Ue.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.state.haveUserLocation?e.map((function(e){return e.latitude==a.state.coords.lat.toFixed(4)||e.longitude==a.state.coords.lng.toFixed(4)?o.a.createElement(xe.a,{position:[e.latitude,e.longitude],icon:Fe},o.a.createElement(ze.a,null,e.name," ",o.a.createElement("br",null)," ",e.message,".")):o.a.createElement(xe.a,{position:[e.latitude,e.longitude],icon:_e},o.a.createElement(ze.a,null,e.name," ",o.a.createElement("br",null)," ",e.message,"."))})):"")},a.forceUpdateHandler=a.forceUpdateHandler.bind(Object(De.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this,t=Date.now();console.log(t),t=new Date(t),this.props.getMarkers(t).then((function(){console.log(e.props.markers.markersInfo),navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords.latitude),console.log(t.coords.longitude),e.setState({coords:{lat:t.coords.latitude,lng:t.coords.longitude},haveUserLocation:!0,zoom:13,position:e.props.markers.markersInfo})}),(function(){alert("Ooh so you didnt allowed the access location but  still we will get it \ud83d\ude00"),fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e.setState({coords:{lat:t.latitude,lng:t.longitude},haveUserLocation:!0,zoom:13,position:e.props.markers.markersInfo})}))}))}))}},{key:"componentDidUpdate",value:function(e,t,a){if(t.position!=this.state.position){var n=this.state.position;return o.a.createElement("div",null,this.renderMarkers(n))}}},{key:"render",value:function(){return this.state.position!==this.props.markers.markersInfo&&(this.state.position=this.props.markers.markersInfo),o.a.createElement("div",{className:"body"},console.log(this.state.position),this.renderMarkers(this.state.position),o.a.createElement(Ge.a,{body:!0,className:"formStyle",style:{marginTop:"30px"}},o.a.createElement(He.a,null,o.a.createElement(Be.a,null,o.a.createElement("b",null,"Welcome to map")," "),o.a.createElement(ae.a,{onSubmit:this.Submitted},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{className:"form",for:"Name"},o.a.createElement("b",null,"Name")),o.a.createElement(re.a,{onChange:this.changedFormValue,type:"text",className:"form",name:"name",id:"exampleEmail",placeholder:"Name.."})),o.a.createElement(ne.a,null,o.a.createElement(oe.a,{className:"form",for:"Message"},o.a.createElement("b",null,"Message")),o.a.createElement(re.a,{type:"message",onChange:this.changedFormValue,className:"form",name:"message",id:"message",placeholder:"message ..."})),o.a.createElement(g.a,{type:"submit"},"Send")),o.a.createElement("hr",null),o.a.createElement(P,{flag:"Map"}))))}}]),t}(n.Component),We=Object(b.b)((function(e){return{markers:e.markers}}),{markMessage:function(e){return console.log(e),function(t,a){return y.a.post("/api/map",e,A(a)).then((function(e){t({payload:e.data,type:O})})).catch((function(e){console.log(e)}))}},getMarkers:_})(Pe),qe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Ee.dispatch((function(e,t){e({type:"USER_LOADING"}),y.a.get("/api/auth/user",A(t)).then((function(t){return e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e(k(t.response.data,t.response.status)),e({type:"AUTH_ERROR"})}))}))}},{key:"render",value:function(){return o.a.createElement(b.a,{store:Ee},o.a.createElement(Oe.BrowserRouter,null,o.a.createElement("div",{className:"App"},o.a.createElement(ge,null),o.a.createElement(be.d,{exact:!0,path:"/",component:ve}),o.a.createElement(be.d,{exact:!0,path:"/chat",component:Ne}),o.a.createElement(be.d,{exact:!0,path:"/search",component:Re}),o.a.createElement(be.d,{exact:!0,path:"/map",component:We}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[242,1,2]]]);
//# sourceMappingURL=main.0d08a7c0.chunk.js.map